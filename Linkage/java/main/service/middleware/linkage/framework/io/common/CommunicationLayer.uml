<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="20110701" xmlns:xmi="http://www.omg.org/spec/XMI/20110701" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:UMLLabProfile="http:///schemas/UMLLabProfile/NS/0" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:uml="http://www.eclipse.org/uml2/4.0.0/UML" xsi:schemaLocation="http:///schemas/UMLLabProfile/NS/0 pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile-Annotation_2-UMLLabProfile">
  <uml:Model xmi:id="_PGrQUJA_EeSEiKM1Xq3Vkg" name="CommunicationLayer">
    <eAnnotations xmi:id="_PQbpQJA_EeSEiKM1Xq3Vkg" source="http://ns.yatta.de/umllab">
      <contents xmi:type="ecore:EAnnotation" xmi:id="_PQbpQZA_EeSEiKM1Xq3Vkg" source="codegen">
        <details xmi:id="_PQbpQpA_EeSEiKM1Xq3Vkg" key="codegenDirectory" value="/Linkage/java/main"/>
        <details xmi:id="_QbHTsJA_EeSEiKM1Xq3Vkg" key="AssociatedSourceCode" value="/Linkage/java/main/service/middleware/linkage/framework/io/common/WorkerPool.java;939585499/1;/Linkage/java/main/service/middleware/linkage/framework/io/common/NIOWorkerPool.java;245769252/1;/Linkage/java/main/service/middleware/linkage/framework/io/common/Worker.java;2162244798/1;/Linkage/java/main/service/middleware/linkage/framework/io/common/NIOWorker.java;2248748530/1;/Linkage/java/main/service/middleware/linkage/framework/io/server/DefaultServer.java;1053176180/1;/Linkage/java/main/service/middleware/linkage/framework/io/server/Server.java;2144689802/1;"/>
      </contents>
      <contents xmi:type="ecore:EAnnotation" xmi:id="_9UQggJCfEeSGr5JQJqgUjA" source="preferences">
        <contents xmi:type="ecore:EAnnotation" xmi:id="_9URHkJCfEeSGr5JQJqgUjA" source="com.yattasolutions.codegen.reverse">
          <details xmi:id="_9URHkZCfEeSGr5JQJqgUjA" key="com.yattasolutions.codegen.reverse.roundtrip.ReverseEngineerNewFiles" value="true"/>
          <details xmi:id="_9URHkpCfEeSGr5JQJqgUjA" key="com.yattasolutions.codegen.reverse.roundtrip.ReverseEngineerChangedFiles" value="true"/>
          <details xmi:id="_9URHk5CfEeSGr5JQJqgUjA" key="com.yattasolutions.codegen.reverse.roundtrip.RemoveDeletedFiles" value="true"/>
        </contents>
      </contents>
    </eAnnotations>
    <elementImport xmi:id="_QFwuwJA_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
    </elementImport>
    <elementImport xmi:id="_QFwuwZA_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#byte"/>
    </elementImport>
    <elementImport xmi:id="_QFwuwpA_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
    </elementImport>
    <elementImport xmi:id="_QFxV0JA_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
    </elementImport>
    <elementImport xmi:id="_QFxV0ZA_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#float"/>
    </elementImport>
    <elementImport xmi:id="_QFxV0pA_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
    </elementImport>
    <elementImport xmi:id="_QFxV05A_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#long"/>
    </elementImport>
    <elementImport xmi:id="_QFxV1JA_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#short"/>
    </elementImport>
    <elementImport xmi:id="_QFyj8JA_EeSEiKM1Xq3Vkg">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
    </elementImport>
    <packagedElement xmi:type="uml:Package" xmi:id="_P_PQAJA_EeSEiKM1Xq3Vkg" name="service">
      <packagedElement xmi:type="uml:Package" xmi:id="_P_P3EJA_EeSEiKM1Xq3Vkg" name="middleware">
        <packagedElement xmi:type="uml:Package" xmi:id="_P_P3EZA_EeSEiKM1Xq3Vkg" name="linkage">
          <packagedElement xmi:type="uml:Package" xmi:id="_P_P3EpA_EeSEiKM1Xq3Vkg" name="framework">
            <packagedElement xmi:type="uml:Package" xmi:id="_P_QeIJA_EeSEiKM1Xq3Vkg" name="io">
              <packagedElement xmi:type="uml:Package" xmi:id="_P_d5gJA_EeSEiKM1Xq3Vkg" name="common">
                <packagedElement xmi:type="uml:Interface" xmi:id="_QFqoIJA_EeSEiKM1Xq3Vkg" name="WorkerPool">
                  <ownedComment xmi:id="_QW-akJA_EeSEiKM1Xq3Vkg">
                    <body>worker pool interface&#xD;
@author zhonxu&#xD;
 *</body>
                  </ownedComment>
                  <ownedAttribute xmi:id="_QFvgoJA_EeSEiKM1Xq3Vkg" name="nextWorker" type="_QGu_IJA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXTxwJA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QFuSgJA_EeSEiKM1Xq3Vkg" name="start"/>
                  <ownedOperation xmi:id="_QF1AMJA_EeSEiKM1Xq3Vkg" name="waitReady"/>
                  <ownedOperation xmi:id="_QF2OUJA_EeSEiKM1Xq3Vkg" name="shutdown">
                    <ownedComment xmi:id="_QW_BoJA_EeSEiKM1Xq3Vkg">
                      <body>shutdown</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QF3ccJA_EeSEiKM1Xq3Vkg" name="shutdownImediate">
                    <ownedComment xmi:id="_QW_BoZA_EeSEiKM1Xq3Vkg">
                      <body>shutdown imediate</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUAmIJA_EeSEiKM1Xq3Vkg" name="register">
                    <ownedParameter xmi:id="_QUAmIZA_EeSEiKM1Xq3Vkg" name="sc" type="_QRVsoJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUBNMJA_EeSEiKM1Xq3Vkg" type="_QT-w8JA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                </packagedElement>
                <packagedElement xmi:type="uml:Class" xmi:id="_QGBNcJA_EeSEiKM1Xq3Vkg" clientDependency="_QRkWIZA_EeSEiKM1Xq3Vkg" name="NIOWorkerPool">
                  <ownedComment xmi:id="_QW_BopA_EeSEiKM1Xq3Vkg">
                    <body>Worker pool, put the channel into the worker pool&#xD;
the worker deal with the bussiness of receiving message &amp; send message&#xD;
@author zhonxu&#xD;
 *</body>
                  </ownedComment>
                  <ownedAttribute xmi:id="_QVksYJA_EeSEiKM1Xq3Vkg" name="workers" visibility="private" type="_QGu_IJA_EeSEiKM1Xq3Vkg" association="_QXbGgZA_EeSEiKM1Xq3Vkg">
                    <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_QVlTcJA_EeSEiKM1Xq3Vkg" value="*"/>
                  </ownedAttribute>
                  <ownedAttribute xmi:id="_QVoWwJA_EeSEiKM1Xq3Vkg" name="nextWorkCount" visibility="private">
                    <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QVoWwZA_EeSEiKM1Xq3Vkg" value="0"/>
                  </ownedAttribute>
                  <ownedAttribute xmi:id="_QVpk4JA_EeSEiKM1Xq3Vkg" name="signal" visibility="private" isLeaf="true" type="_QRcaUJA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXdiwZA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QVraEJA_EeSEiKM1Xq3Vkg" name="logger" visibility="private" isStatic="true" type="_QRePgZA_EeSEiKM1Xq3Vkg" association="_QXgmEJA_EeSEiKM1Xq3Vkg">
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QVraEZA_EeSEiKM1Xq3Vkg" value="Logger.getLogger(NIOWorkerPool.class)"/>
                  </ownedAttribute>
                  <interfaceRealization xmi:id="_QRkWIZA_EeSEiKM1Xq3Vkg" client="_QGBNcJA_EeSEiKM1Xq3Vkg" supplier="_QFqoIJA_EeSEiKM1Xq3Vkg" contract="_QFqoIJA_EeSEiKM1Xq3Vkg"/>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWddMJA_EeSEiKM1Xq3Vkg" name="NIOWorkerPool" specification="_QUEQgJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWddMZA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWddMpA_EeSEiKM1Xq3Vkg" name="workerCounter">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                    </ownedParameter>
                    <ownedParameter xmi:id="_QWddM5A_EeSEiKM1Xq3Vkg" type="_QGBNcJA_EeSEiKM1Xq3Vkg" direction="return"/>
                    <language>java</language>
                    <body>signal = new CountDownLatch(workerCounter);&#xD;
		workers = new Worker[workerCounter];&#xD;
		for(int i = 0; i &lt; workers.length; i++){&#xD;
			try {&#xD;
				workers[i] = new NIOWorker(eventDistributionHandler, signal);&#xD;
			} catch (Exception e) {&#xD;
				logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
						+ StringUtils.ExceptionStackTraceToString(e));&#xD;
			}&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWerUJA_EeSEiKM1Xq3Vkg" name="NIOWorkerPool" specification="_QUHT0JA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWerUZA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWerUpA_EeSEiKM1Xq3Vkg" type="_QGBNcJA_EeSEiKM1Xq3Vkg" direction="return"/>
                    <language>java</language>
                    <body>int workerCounter = Runtime.getRuntime().availableProcessors();&#xD;
		signal = new CountDownLatch(workerCounter);&#xD;
		workers = new Worker[workerCounter];&#xD;
		for(int i = 0; i &lt; workers.length; i++){&#xD;
			try {&#xD;
				workers[i] = new NIOWorker(eventDistributionHandler, signal);&#xD;
			} catch (Exception e) {&#xD;
				logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
						+ StringUtils.ExceptionStackTraceToString(e));&#xD;
			}&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWfSYJA_EeSEiKM1Xq3Vkg" name="start" specification="_QGJwUJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>logger.debug(&quot;starting all of  the worker.&quot;);&#xD;
		for(int i = 0; i &lt; workers.length; i++){&#xD;
			new Thread(workers[i]).start();&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWf5cJA_EeSEiKM1Xq3Vkg" name="getNextWorker" specification="_QGK-cJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWf5cZA_EeSEiKM1Xq3Vkg" type="_QGu_IJA_EeSEiKM1Xq3Vkg" direction="return"/>
                    <language>java</language>
                    <body>return workers[Math.abs(nextWorkCount++)%workers.length];&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWhHkJA_EeSEiKM1Xq3Vkg" name="register" specification="_QUKXIJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWhHkZA_EeSEiKM1Xq3Vkg" name="sc" type="_QRVsoJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWhHkpA_EeSEiKM1Xq3Vkg" type="_QT-w8JA_EeSEiKM1Xq3Vkg" direction="return"/>
                    <language>java</language>
                    <body>Worker worker = getNextWorker();&#xD;
		return worker.submitOpeRegister(sc);&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWhuoJA_EeSEiKM1Xq3Vkg" name="waitReady" specification="_QGMzoJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>try {&#xD;
			signal.await();&#xD;
		} catch (InterruptedException e) {&#xD;
			logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
					+ StringUtils.ExceptionStackTraceToString(e));&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWhuoZA_EeSEiKM1Xq3Vkg" name="shutdown" specification="_QGP28ZA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>logger.debug(&quot;shutdown all of the workers.&quot;);&#xD;
		// TODO Auto-generated method stub&#xD;
		for(int i = 0; i &lt; workers.length; i++){&#xD;
			workers[i].shutdown();&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWiVsJA_EeSEiKM1Xq3Vkg" name="shutdownImediate" specification="_QGSTMJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>logger.debug(&quot;shutdown imediate all of the workers.&quot;);&#xD;
		// TODO Auto-generated method stub&#xD;
		for(int i = 0; i &lt; workers.length; i++){&#xD;
			workers[i].shutdownImediate();&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedOperation xmi:id="_QGJwUJA_EeSEiKM1Xq3Vkg" name="start" method="_QWfSYJA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QGK-cJA_EeSEiKM1Xq3Vkg" name="getNextWorker" method="_QWf5cJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QRoAgJA_EeSEiKM1Xq3Vkg" type="_QGu_IJA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QGMzoJA_EeSEiKM1Xq3Vkg" name="waitReady" method="_QWhuoJA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QGP28ZA_EeSEiKM1Xq3Vkg" name="shutdown" method="_QWhuoZA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QGSTMJA_EeSEiKM1Xq3Vkg" name="shutdownImediate" method="_QWiVsJA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QUEQgJA_EeSEiKM1Xq3Vkg" name="NIOWorkerPool" method="_QWddMJA_EeSEiKM1Xq3Vkg">
                    <eAnnotations xmi:id="_QUE3kZA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                      <details xmi:id="_QUE3kpA_EeSEiKM1Xq3Vkg" key="create"/>
                    </eAnnotations>
                    <ownedComment xmi:id="_QW_osJA_EeSEiKM1Xq3Vkg">
                      <body>&#xD;
	 * @param eventDistributionHandler&#xD;
	 * @param workerCounter assign the point</body>
                    </ownedComment>
                    <ownedParameter xmi:id="_QUEQgZA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUE3kJA_EeSEiKM1Xq3Vkg" name="workerCounter">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                    </ownedParameter>
                    <ownedParameter xmi:id="_QUE3k5A_EeSEiKM1Xq3Vkg" type="_QGBNcJA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUHT0JA_EeSEiKM1Xq3Vkg" name="NIOWorkerPool" method="_QWerUJA_EeSEiKM1Xq3Vkg">
                    <eAnnotations xmi:id="_QUH64JA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                      <details xmi:id="_QUH64ZA_EeSEiKM1Xq3Vkg" key="create"/>
                    </eAnnotations>
                    <ownedParameter xmi:id="_QUHT0ZA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUH64pA_EeSEiKM1Xq3Vkg" type="_QGBNcJA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUKXIJA_EeSEiKM1Xq3Vkg" name="register" method="_QWhHkJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QUKXIZA_EeSEiKM1Xq3Vkg" name="sc" type="_QRVsoJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUK-MJA_EeSEiKM1Xq3Vkg" type="_QT-w8JA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                </packagedElement>
                <packagedElement xmi:type="uml:Interface" xmi:id="_QGu_IJA_EeSEiKM1Xq3Vkg" name="Worker">
                  <ownedComment xmi:id="_QXAPwJA_EeSEiKM1Xq3Vkg">
                    <body>worker interface&#xD;
@author zhonxu&#xD;
 *</body>
                  </ownedComment>
                  <generalization xmi:id="_QURr4JA_EeSEiKM1Xq3Vkg" general="_QUPPoZA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QGypgJA_EeSEiKM1Xq3Vkg" name="shutdown">
                    <ownedComment xmi:id="_QXA20JA_EeSEiKM1Xq3Vkg">
                      <body>shutdown</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QGz3oJA_EeSEiKM1Xq3Vkg" name="shutdownImediate">
                    <ownedComment xmi:id="_QXA20ZA_EeSEiKM1Xq3Vkg">
                      <body>shutdown imediate</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUSS8JA_EeSEiKM1Xq3Vkg" name="submitOpeRegister">
                    <ownedParameter xmi:id="_QUS6AJA_EeSEiKM1Xq3Vkg" name="sc" type="_QRVsoJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUS6AZA_EeSEiKM1Xq3Vkg" type="_QT-w8JA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUUIIJA_EeSEiKM1Xq3Vkg" name="writeFromUser">
                    <ownedParameter xmi:id="_QUUIIZA_EeSEiKM1Xq3Vkg" name="channel" type="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUUvMJA_EeSEiKM1Xq3Vkg" direction="return">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                    </ownedParameter>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUV9UJA_EeSEiKM1Xq3Vkg" name="closeWorkingChannel" raisedException="_QRzmsJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QUV9UZA_EeSEiKM1Xq3Vkg" name="workingchannel" type="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
                  </ownedOperation>
                </packagedElement>
                <packagedElement xmi:type="uml:Class" xmi:id="_QHAE4JA_EeSEiKM1Xq3Vkg" clientDependency="_QSlCwZA_EeSEiKM1Xq3Vkg" name="NIOWorker">
                  <ownedComment xmi:id="_QXBd4JA_EeSEiKM1Xq3Vkg">
                    <body>this is default worker, will be used when there is connection established &#xD;
it will deal with the message send&amp;receive between the client and service&#xD;
@author zhonxu&#xD;
 *</body>
                  </ownedComment>
                  <ownedAttribute xmi:id="_QVxgsJA_EeSEiKM1Xq3Vkg" name="taskQueue" visibility="private" isLeaf="true" type="_QSJk8JA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXjCUJA_EeSEiKM1Xq3Vkg">
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QVzV4ZA_EeSEiKM1Xq3Vkg" value="new ConcurrentLinkedQueue&lt;Runnable>()"/>
                  </ownedAttribute>
                  <ownedAttribute xmi:id="_QV0kAJA_EeSEiKM1Xq3Vkg" name="wakenUp" visibility="protected" isLeaf="true" type="_QST9AZA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXk3gJA_EeSEiKM1Xq3Vkg">
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QV0kAZA_EeSEiKM1Xq3Vkg" value="new AtomicBoolean()"/>
                  </ownedAttribute>
                  <ownedAttribute xmi:id="_QV1yIJA_EeSEiKM1Xq3Vkg" name="selector" visibility="private" isLeaf="true" type="_QSFTgZA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXnTwJA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QV3AQJA_EeSEiKM1Xq3Vkg" name="objExecutorService" visibility="private" isLeaf="true" type="_QSN2YZA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXpwAJA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QV4OYJA_EeSEiKM1Xq3Vkg" name="signal" visibility="private" isLeaf="true" type="_QRcaUJA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXszUJA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QV5cgZA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" visibility="private" isLeaf="true" type="_QRig8JA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXvPkZA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QV7RsJA_EeSEiKM1Xq3Vkg" name="isShutdown" visibility="private">
                    <eAnnotations xmi:id="_QV7RsZA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                      <details xmi:id="_QV7RspA_EeSEiKM1Xq3Vkg" key="volatile"/>
                    </eAnnotations>
                    <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QV7Rs5A_EeSEiKM1Xq3Vkg" value="false"/>
                  </ownedAttribute>
                  <ownedAttribute xmi:id="_QV8f0JA_EeSEiKM1Xq3Vkg" name="shutdownSignal" visibility="private" isLeaf="true" type="_QRcaUJA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXxr0ZA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QV9t8ZA_EeSEiKM1Xq3Vkg" name="logger" visibility="private" isStatic="true" type="_QRePgZA_EeSEiKM1Xq3Vkg" association="_QX0vIJA_EeSEiKM1Xq3Vkg">
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QV-VAJA_EeSEiKM1Xq3Vkg" value="Logger.getLogger(NIOWorker.class)"/>
                  </ownedAttribute>
                  <interfaceRealization xmi:id="_QSlCwZA_EeSEiKM1Xq3Vkg" client="_QHAE4JA_EeSEiKM1Xq3Vkg" supplier="_QGu_IJA_EeSEiKM1Xq3Vkg" contract="_QGu_IJA_EeSEiKM1Xq3Vkg"/>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWmAEJA_EeSEiKM1Xq3Vkg" name="NIOWorker" specification="_QUixoZA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWmAEZA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWmAEpA_EeSEiKM1Xq3Vkg" name="signal" type="_QRcaUJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWmAE5A_EeSEiKM1Xq3Vkg" type="_QHAE4JA_EeSEiKM1Xq3Vkg" direction="return"/>
                    <language>java</language>
                    <body>selector = Selector.open();&#xD;
		this.objExecutorService = Executors.newFixedThreadPool(10);&#xD;
		this.signal = signal;&#xD;
		this.eventDistributionHandler = eventDistributionHandler;&#xD;
		shutdownSignal = new CountDownLatch(1);&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWmnIJA_EeSEiKM1Xq3Vkg" name="run" specification="_QHOHUJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>signal.countDown();&#xD;
		logger.debug(&quot;start worker hashCode = &quot; + this.hashCode());&#xD;
		// Listening&#xD;
		while (true) {&#xD;
			try {&#xD;
				wakenUp.set(false);&#xD;
				int num = 0;&#xD;
				num = selector.select();&#xD;
				// If we shutdown the loop, then beak from the loop&#xD;
				if(isShutdown){&#xD;
					logger.debug(&quot;shutdown, break loop after select.&quot;);&#xD;
					shutdownSignal.countDown();&#xD;
					break;&#xD;
				}&#xD;
				processTaskQueue();&#xD;
				if (num > 0) {&#xD;
					Set selectedKeys = selector.selectedKeys();&#xD;
					Iterator it = selectedKeys.iterator();&#xD;
					while (it.hasNext()) {&#xD;
						SelectionKey key = (SelectionKey) it.next();&#xD;
						it.remove();&#xD;
						// 处理IO事件&#xD;
						if (key.isReadable()) {&#xD;
							if(!read(key)){&#xD;
								this.closeChannel(key);&#xD;
							}&#xD;
						} else if (key.isWritable()) {&#xD;
							writeFromSelectorLoop(key);&#xD;
						} &#xD;
					}&#xD;
				} &#xD;
			} catch (IOException e) {&#xD;
				if(isShutdown){&#xD;
					logger.debug(&quot;shutdown, break loop after ioexception. exception detail : &quot; &#xD;
						+ StringUtils.ExceptionStackTraceToString(e));&#xD;
					shutdownSignal.countDown();&#xD;
					break;&#xD;
				}&#xD;
				logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
						+ StringUtils.ExceptionStackTraceToString(e));&#xD;
				continue;&#xD;
			}&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWnOMJA_EeSEiKM1Xq3Vkg" name="shutdown" specification="_QHPVcJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>logger.debug(&quot;shutdown worker.&quot;);&#xD;
		isShutdown = true;&#xD;
		if (selector != null) {&#xD;
         if (wakenUp.compareAndSet(false, true)) {&#xD;
             selector.wakeup();&#xD;
         }&#xD;
     }&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWn1QJA_EeSEiKM1Xq3Vkg" name="shutdownImediate" specification="_QHQjkJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>logger.debug(&quot;shutdown worker imediately.&quot;);&#xD;
		isShutdown = true;&#xD;
		if (selector != null) {&#xD;
         if (wakenUp.compareAndSet(false, true)) {&#xD;
             selector.wakeup();&#xD;
         }&#xD;
     }&#xD;
		try {&#xD;
			shutdownSignal.await();&#xD;
		} catch (InterruptedException e) {&#xD;
			logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
					+ StringUtils.ExceptionStackTraceToString(e));&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWocUJA_EeSEiKM1Xq3Vkg" name="processTaskQueue" specification="_QHSYwJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>for (;;) {&#xD;
         final Runnable task = taskQueue.poll();&#xD;
         if (task == null) {&#xD;
             break;&#xD;
         }&#xD;
         task.run();&#xD;
     }&#xD;
 </body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWpDYJA_EeSEiKM1Xq3Vkg" name="writeFromSelectorLoop" specification="_QUlN4JA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWpDYZA_EeSEiKM1Xq3Vkg" name="key" type="_QSDeUJA_EeSEiKM1Xq3Vkg">
                      <eAnnotations xmi:id="_QWpDYpA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                        <details xmi:id="_QWpDY5A_EeSEiKM1Xq3Vkg" key="final"/>
                      </eAnnotations>
                    </ownedParameter>
                    <language>java</language>
                    <body>WorkingChannel channel = (WorkingChannel) key.attachment();&#xD;
 	writeFromUser(channel);&#xD;
 </body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWpqcJA_EeSEiKM1Xq3Vkg" name="writeFromUser" specification="_QUnDEJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWpqcZA_EeSEiKM1Xq3Vkg" name="workingChannel" type="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWpqcpA_EeSEiKM1Xq3Vkg" direction="return">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                    </ownedParameter>
                    <language>java</language>
                    <body>NIOWorkingChannel channel = (NIOWorkingChannel)workingChannel;&#xD;
		ServiceOnMessageWriteEvent evt;&#xD;
		final Queue&lt;ServiceOnMessageWriteEvent> writeBuffer = channel.writeBufferQueue;&#xD;
		synchronized (channel.writeLock) {&#xD;
			for (;;) {&#xD;
				if ((evt = writeBuffer.poll()) == null) {&#xD;
					break;&#xD;
				}&#xD;
				SocketChannel sc = (SocketChannel) channel.getChannel();&#xD;
				byte[] data = null;&#xD;
				try {&#xD;
					data = CommunicationProtocol.wrapMessage(evt.getMessage())&#xD;
							.getBytes(CommunicationProtocol.FRAMEWORK_IO_ENCODING);&#xD;
				} catch (UnsupportedEncodingException e2) {&#xD;
					e2.printStackTrace();&#xD;
				}&#xD;
				ByteBuffer buffer = ByteBuffer&#xD;
						.allocate(data.length);&#xD;
				buffer.put(data, 0, data.length);&#xD;
				buffer.flip();&#xD;
				if (buffer.hasRemaining()) {&#xD;
					try {&#xD;
						while(buffer.hasRemaining())&#xD;
							sc.write(buffer);&#xD;
					} catch (IOException e) {&#xD;
						this.eventDistributionHandler.submitServiceEvent(new ServiceOnChannelCloseExeptionEvent(channel, evt.getRequestID(), new ServiceException(e, e.getMessage())));&#xD;
						logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
								+ StringUtils.ExceptionStackTraceToString(e));&#xD;
						try {&#xD;
							closeChannel(channel.getKey());&#xD;
						} catch (IOException e1) {&#xD;
							logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
									+ StringUtils.ExceptionStackTraceToString(e1));&#xD;
						}&#xD;
					}&#xD;
				}&#xD;
			}&#xD;
		}&#xD;
		return true;&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWq4kJA_EeSEiKM1Xq3Vkg" name="closeChannel" specification="_QUqGYJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWq4kZA_EeSEiKM1Xq3Vkg" name="key" type="_QSDeUJA_EeSEiKM1Xq3Vkg"/>
                    <language>java</language>
                    <body>key.cancel();&#xD;
		SocketChannel sc = (SocketChannel)key.channel();&#xD;
		sc.close();&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWrfoJA_EeSEiKM1Xq3Vkg" name="closeWorkingChannel" specification="_QUsioJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWrfoZA_EeSEiKM1Xq3Vkg" name="workingchannel" type="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
                    <language>java</language>
                    <body>closeChannel(((NIOWorkingChannel)workingchannel).getKey());&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWsGsJA_EeSEiKM1Xq3Vkg" name="read" specification="_QUu-4JA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWsGsZA_EeSEiKM1Xq3Vkg" name="key" type="_QSDeUJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWsGspA_EeSEiKM1Xq3Vkg" direction="return">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                    </ownedParameter>
                    <language>java</language>
                    <body>SocketChannel ch = (SocketChannel) key.channel();&#xD;
		final NIOWorkingChannel objWorkingChannel = (NIOWorkingChannel)key.attachment();&#xD;
		int readBytes = 0;&#xD;
		int ret = 0;&#xD;
		boolean success = false;&#xD;
	    ByteBuffer bb = ByteBuffer.allocate(CommunicationProtocol.BUFFER_SIZE);&#xD;
     try {&#xD;
         while ((ret = ch.read(bb)) > 0) {&#xD;
             readBytes += ret;&#xD;
             if (!bb.hasRemaining()) {&#xD;
                 break;&#xD;
             }&#xD;
         }&#xD;
         if (ret &lt; 0 ) {&#xD;
         	return success = false;&#xD;
         }&#xD;
         success = true;&#xD;
     } catch (ClosedChannelException e) {&#xD;
     	this.eventDistributionHandler.submitServiceEvent(new ServiceOnChannelCloseExeptionEvent(objWorkingChannel, null, new ServiceOnChanelClosedException(e, e.getMessage())));&#xD;
         return false;&#xD;
     	&#xD;
     } &#xD;
     // Can happen, and does not need a user attention.&#xD;
     catch (IOException e) {&#xD;
     	this.eventDistributionHandler.submitServiceEvent(new ServiceOnChannelIOExeptionEvent(objWorkingChannel, null, new ServiceOnChanelIOException(e, e.getMessage())));&#xD;
     	return false;&#xD;
     } &#xD;
     if (readBytes > 0) {&#xD;
         bb.flip();&#xD;
     }&#xD;
		byte[] message = new byte[readBytes];&#xD;
		System.arraycopy(bb.array(), 0, message, 0, readBytes);&#xD;
		String receiveString = &quot;&quot;;&#xD;
		try {&#xD;
			receiveString = new String(message, CommunicationProtocol.FRAMEWORK_IO_ENCODING);&#xD;
		} catch (UnsupportedEncodingException e1) {&#xD;
			e1.printStackTrace();&#xD;
		}&#xD;
		synchronized(objWorkingChannel.readLock){&#xD;
			objWorkingChannel.getBufferMessage().append(receiveString);&#xD;
			String unwrappedMessage = &quot;&quot;;&#xD;
			try {&#xD;
				while((unwrappedMessage = CommunicationProtocol.extractMessage(objWorkingChannel.getBufferMessage())) != &quot;&quot;)&#xD;
				{&#xD;
					final String sendMessage = unwrappedMessage;&#xD;
					objExecutorService.execute(new Runnable(){&#xD;
	&#xD;
						@Override&#xD;
						public void run() {&#xD;
							ServiceOnMessageReceiveEvent event = new ServiceOnMessageReceiveEvent(objWorkingChannel);&#xD;
							event.setMessage(sendMessage);&#xD;
							eventDistributionHandler.submitServiceEvent(event);&#xD;
						}&#xD;
						&#xD;
					});&#xD;
				}&#xD;
				&#xD;
			} catch (Exception e) {&#xD;
				logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
						+ StringUtils.ExceptionStackTraceToString(e));&#xD;
			}&#xD;
		}&#xD;
		return success;&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWstwJA_EeSEiKM1Xq3Vkg" name="submitOpeRegister" specification="_QUw0EJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWstwZA_EeSEiKM1Xq3Vkg" name="schannel" type="_QRVsoJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWstwpA_EeSEiKM1Xq3Vkg" type="_QT-w8JA_EeSEiKM1Xq3Vkg" direction="return"/>
                    <language>java</language>
                    <body>WorkingChannel objWorkingChannel = new NIOWorkingChannel(schannel, this);&#xD;
		registerTask(new RegisterTask(objWorkingChannel));&#xD;
		return objWorkingChannel;&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWtU0JA_EeSEiKM1Xq3Vkg" name="registerTask" specification="_QUyCMJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWt74JA_EeSEiKM1Xq3Vkg" name="task" type="_QUPPoZA_EeSEiKM1Xq3Vkg"/>
                    <language>java</language>
                    <body>taskQueue.add(task);&#xD;
     Selector selector = this.selector;&#xD;
     if (selector != null) {&#xD;
         if (wakenUp.compareAndSet(false, true)) {&#xD;
             selector.wakeup();&#xD;
         }&#xD;
     } else {&#xD;
         if (taskQueue.remove(task)) {&#xD;
             // the selector was null this means the Worker has already been shutdown.&#xD;
             throw new RejectedExecutionException(&quot;Worker has already been shutdown&quot;);&#xD;
         }&#xD;
     }&#xD;
 </body>
                  </ownedBehavior>
                  <ownedOperation xmi:id="_QHOHUJA_EeSEiKM1Xq3Vkg" name="run" method="_QWmnIJA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QHPVcJA_EeSEiKM1Xq3Vkg" name="shutdown" method="_QWnOMJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXCE8JA_EeSEiKM1Xq3Vkg">
                      <body>shutdown</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QHQjkJA_EeSEiKM1Xq3Vkg" name="shutdownImediate" method="_QWn1QJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXCsAJA_EeSEiKM1Xq3Vkg">
                      <body>shutdown</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QHSYwJA_EeSEiKM1Xq3Vkg" name="processTaskQueue" visibility="private" method="_QWocUJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXCsAZA_EeSEiKM1Xq3Vkg">
                      <body>deal with the task queue</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUixoZA_EeSEiKM1Xq3Vkg" name="NIOWorker" method="_QWmAEJA_EeSEiKM1Xq3Vkg">
                    <eAnnotations xmi:id="_QUjYspA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                      <details xmi:id="_QUjYs5A_EeSEiKM1Xq3Vkg" key="create"/>
                    </eAnnotations>
                    <ownedParameter xmi:id="_QUjYsJA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUjYsZA_EeSEiKM1Xq3Vkg" name="signal" type="_QRcaUJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUj_wJA_EeSEiKM1Xq3Vkg" type="_QHAE4JA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUlN4JA_EeSEiKM1Xq3Vkg" name="writeFromSelectorLoop" visibility="private" method="_QWpDYJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QUlN4ZA_EeSEiKM1Xq3Vkg" name="key" type="_QSDeUJA_EeSEiKM1Xq3Vkg">
                      <eAnnotations xmi:id="_QUl08JA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                        <details xmi:id="_QUl08ZA_EeSEiKM1Xq3Vkg" key="final"/>
                      </eAnnotations>
                    </ownedParameter>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUnDEJA_EeSEiKM1Xq3Vkg" name="writeFromUser" method="_QWpqcJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXCsApA_EeSEiKM1Xq3Vkg">
                      <body>write data by user&#xD;
	 * @param key&#xD;
	 * @return</body>
                    </ownedComment>
                    <ownedParameter xmi:id="_QUnDEZA_EeSEiKM1Xq3Vkg" name="workingChannel" type="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUnqIJA_EeSEiKM1Xq3Vkg" direction="return">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                    </ownedParameter>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUqGYJA_EeSEiKM1Xq3Vkg" name="closeChannel" visibility="private" method="_QWq4kJA_EeSEiKM1Xq3Vkg" raisedException="_QRzmsJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXDTEJA_EeSEiKM1Xq3Vkg">
                      <body>close the channel&#xD;
	 * &#xD;
	 * @param sc&#xD;
	 * @throws IOException</body>
                    </ownedComment>
                    <ownedParameter xmi:id="_QUqGYZA_EeSEiKM1Xq3Vkg" name="key" type="_QSDeUJA_EeSEiKM1Xq3Vkg"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUsioJA_EeSEiKM1Xq3Vkg" name="closeWorkingChannel" method="_QWrfoJA_EeSEiKM1Xq3Vkg" raisedException="_QRzmsJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXDTEZA_EeSEiKM1Xq3Vkg">
                      <body>close the working channel&#xD;
	 * @param workingchannel&#xD;
	 * @throws IOException</body>
                    </ownedComment>
                    <ownedParameter xmi:id="_QUsioZA_EeSEiKM1Xq3Vkg" name="workingchannel" type="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUu-4JA_EeSEiKM1Xq3Vkg" name="read" visibility="private" method="_QWsGsJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXD6IJA_EeSEiKM1Xq3Vkg">
                      <body> &#xD;
	 * @param key&#xD;
	 * @return</body>
                    </ownedComment>
                    <ownedParameter xmi:id="_QUu-4ZA_EeSEiKM1Xq3Vkg" name="key" type="_QSDeUJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUvl8JA_EeSEiKM1Xq3Vkg" direction="return">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                    </ownedParameter>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUw0EJA_EeSEiKM1Xq3Vkg" name="submitOpeRegister" method="_QWstwJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXD6IZA_EeSEiKM1Xq3Vkg">
                      <body>register a channel to the worker</body>
                    </ownedComment>
                    <ownedParameter xmi:id="_QUw0EZA_EeSEiKM1Xq3Vkg" name="schannel" type="_QRVsoJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QUw0EpA_EeSEiKM1Xq3Vkg" type="_QT-w8JA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QUyCMJA_EeSEiKM1Xq3Vkg" name="registerTask" visibility="protected" isLeaf="true" method="_QWtU0JA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXEhMJA_EeSEiKM1Xq3Vkg">
                      <body>submit a register task to the task queue&#xD;
	 * @param task</body>
                    </ownedComment>
                    <ownedParameter xmi:id="_QUyCMZA_EeSEiKM1Xq3Vkg" name="task" type="_QUPPoZA_EeSEiKM1Xq3Vkg"/>
                  </ownedOperation>
                  <nestedClassifier xmi:type="uml:Class" xmi:id="_QHgbMJA_EeSEiKM1Xq3Vkg" clientDependency="_QUz3YJA_EeSEiKM1Xq3Vkg" name="RegisterTask" visibility="private" isLeaf="true">
                    <ownedComment xmi:id="_QXEhMZA_EeSEiKM1Xq3Vkg">
                      <body>this class is used to register the task to the worker&#xD;
	 * @author zhonxu&#xD;
	 *</body>
                    </ownedComment>
                    <ownedAttribute xmi:id="_QWAKMJA_EeSEiKM1Xq3Vkg" name="objWorkingChannel" visibility="private" type="_QU1FgJA_EeSEiKM1Xq3Vkg" association="_QX3LYZA_EeSEiKM1Xq3Vkg"/>
                    <interfaceRealization xmi:id="_QUz3YJA_EeSEiKM1Xq3Vkg" client="_QHgbMJA_EeSEiKM1Xq3Vkg" supplier="_QUPPoZA_EeSEiKM1Xq3Vkg" contract="_QUPPoZA_EeSEiKM1Xq3Vkg"/>
                    <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWui8JA_EeSEiKM1Xq3Vkg" name="RegisterTask" specification="_QU4v4JA_EeSEiKM1Xq3Vkg">
                      <ownedParameter xmi:id="_QWui8ZA_EeSEiKM1Xq3Vkg" name="workingChannel" type="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
                      <ownedParameter xmi:id="_QWui8pA_EeSEiKM1Xq3Vkg" type="_QHgbMJA_EeSEiKM1Xq3Vkg" direction="return"/>
                      <language>java</language>
                      <body>this.objWorkingChannel = (NIOWorkingChannel)workingChannel;&#xD;
		</body>
                    </ownedBehavior>
                    <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWvKAJA_EeSEiKM1Xq3Vkg" name="run" specification="_QHl6wJA_EeSEiKM1Xq3Vkg">
                      <language>java</language>
                      <body>SocketChannel schannel = (SocketChannel) objWorkingChannel.getChannel();&#xD;
			try {&#xD;
				schannel.configureBlocking(false);&#xD;
				SelectionKey key = schannel.register(selector, SelectionKey.OP_READ, objWorkingChannel);&#xD;
				objWorkingChannel.setKey(key);&#xD;
			} catch (Exception e) {&#xD;
				try {&#xD;
					schannel.finishConnect();&#xD;
					schannel.close();&#xD;
					schannel.socket().close();&#xD;
					eventDistributionHandler.submitServiceEvent(new ServiceOnChannelCloseExeptionEvent(objWorkingChannel, null, new ServiceException(e, e.getMessage())));&#xD;
				} catch (Exception e1) {&#xD;
				}&#xD;
			}&#xD;
		</body>
                    </ownedBehavior>
                    <ownedOperation xmi:id="_QHl6wJA_EeSEiKM1Xq3Vkg" name="run" method="_QWvKAJA_EeSEiKM1Xq3Vkg"/>
                    <ownedOperation xmi:id="_QU4v4JA_EeSEiKM1Xq3Vkg" name="RegisterTask" method="_QWui8JA_EeSEiKM1Xq3Vkg">
                      <eAnnotations xmi:id="_QU5W8ZA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                        <details xmi:id="_QU5W8pA_EeSEiKM1Xq3Vkg" key="create"/>
                      </eAnnotations>
                      <ownedParameter xmi:id="_QU5W8JA_EeSEiKM1Xq3Vkg" name="workingChannel" type="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
                      <ownedParameter xmi:id="_QU5-AJA_EeSEiKM1Xq3Vkg" type="_QHgbMJA_EeSEiKM1Xq3Vkg" direction="return"/>
                    </ownedOperation>
                  </nestedClassifier>
                </packagedElement>
                <packagedElement xmi:type="uml:Interface" xmi:id="_QT-w8JA_EeSEiKM1Xq3Vkg" name="WorkingChannel"/>
                <packagedElement xmi:type="uml:Class" xmi:id="_QU1FgJA_EeSEiKM1Xq3Vkg" name="NIOWorkingChannel"/>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXTxwJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXUY0JA_EeSEiKM1Xq3Vkg _QFvgoJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXUY0JA_EeSEiKM1Xq3Vkg" name="" type="_QFqoIJA_EeSEiKM1Xq3Vkg" association="_QXTxwJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXbGgZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXbGgpA_EeSEiKM1Xq3Vkg _QVksYJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXbGgpA_EeSEiKM1Xq3Vkg" name="" type="_QGBNcJA_EeSEiKM1Xq3Vkg" association="_QXbGgZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXdiwZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXdiwpA_EeSEiKM1Xq3Vkg _QVpk4JA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXdiwpA_EeSEiKM1Xq3Vkg" name="" type="_QGBNcJA_EeSEiKM1Xq3Vkg" association="_QXdiwZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXgmEJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXgmEZA_EeSEiKM1Xq3Vkg _QVraEJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXgmEZA_EeSEiKM1Xq3Vkg" name="" type="_QGBNcJA_EeSEiKM1Xq3Vkg" association="_QXgmEJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXjCUJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXjCUZA_EeSEiKM1Xq3Vkg _QVxgsJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXjCUZA_EeSEiKM1Xq3Vkg" name="" type="_QHAE4JA_EeSEiKM1Xq3Vkg" association="_QXjCUJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXk3gJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXk3gZA_EeSEiKM1Xq3Vkg _QV0kAJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXk3gZA_EeSEiKM1Xq3Vkg" name="" type="_QHAE4JA_EeSEiKM1Xq3Vkg" association="_QXk3gJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXnTwJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXnTwZA_EeSEiKM1Xq3Vkg _QV1yIJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXnTwZA_EeSEiKM1Xq3Vkg" name="" type="_QHAE4JA_EeSEiKM1Xq3Vkg" association="_QXnTwJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXpwAJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXpwAZA_EeSEiKM1Xq3Vkg _QV3AQJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXpwAZA_EeSEiKM1Xq3Vkg" name="" type="_QHAE4JA_EeSEiKM1Xq3Vkg" association="_QXpwAJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXszUJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXszUZA_EeSEiKM1Xq3Vkg _QV4OYJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXszUZA_EeSEiKM1Xq3Vkg" name="" type="_QHAE4JA_EeSEiKM1Xq3Vkg" association="_QXszUJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXvPkZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXvPkpA_EeSEiKM1Xq3Vkg _QV5cgZA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXvPkpA_EeSEiKM1Xq3Vkg" name="" type="_QHAE4JA_EeSEiKM1Xq3Vkg" association="_QXvPkZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXxr0ZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXxr0pA_EeSEiKM1Xq3Vkg _QV8f0JA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXxr0pA_EeSEiKM1Xq3Vkg" name="" type="_QHAE4JA_EeSEiKM1Xq3Vkg" association="_QXxr0ZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QX0vIJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QX0vIZA_EeSEiKM1Xq3Vkg _QV9t8ZA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QX0vIZA_EeSEiKM1Xq3Vkg" name="" type="_QHAE4JA_EeSEiKM1Xq3Vkg" association="_QX0vIJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QX3LYZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QX3LYpA_EeSEiKM1Xq3Vkg _QWAKMJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QX3LYpA_EeSEiKM1Xq3Vkg" name="" type="_QHgbMJA_EeSEiKM1Xq3Vkg" association="_QX3LYZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
              </packagedElement>
              <packagedElement xmi:type="uml:Package" xmi:id="_QAChQJA_EeSEiKM1Xq3Vkg" name="protocol">
                <packagedElement xmi:type="uml:Class" xmi:id="_QSjNkJA_EeSEiKM1Xq3Vkg" name="CommunicationProtocol"/>
              </packagedElement>
              <packagedElement xmi:type="uml:Package" xmi:id="_QB_pEJA_EeSEiKM1Xq3Vkg" name="server">
                <packagedElement xmi:type="uml:Class" xmi:id="_QIkyMJA_EeSEiKM1Xq3Vkg" clientDependency="_QTUpoJA_EeSEiKM1Xq3Vkg" name="DefaultServer">
                  <ownedComment xmi:id="_QXFIQJA_EeSEiKM1Xq3Vkg">
                    <body>&lt;p>&#xD;
this class is used the start a server&#xD;
the server will accept the connection and put it into the work pool&#xD;
&lt;/p>&#xD;
&#xD;
@author starboy&#xD;
@version 1.0</body>
                  </ownedComment>
                  <ownedAttribute xmi:id="_QWG34JA_EeSEiKM1Xq3Vkg" name="wpool" visibility="private" isStatic="true" type="_QSJk8JA_EeSEiKM1Xq3Vkg" association="_QX5noZA_EeSEiKM1Xq3Vkg">
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QWIGAZA_EeSEiKM1Xq3Vkg" value="new ConcurrentLinkedQueue&lt;SelectionKey>()"/>
                  </ownedAttribute>
                  <ownedAttribute xmi:id="_QWJUIJA_EeSEiKM1Xq3Vkg" name="selector" visibility="private" isLeaf="true" type="_QSFTgZA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QX8q8JA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QWKiQJA_EeSEiKM1Xq3Vkg" name="sschannel" visibility="private" isLeaf="true" type="_QTOjAZA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QX_HMZA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QWLwYJA_EeSEiKM1Xq3Vkg" name="address" visibility="private" isLeaf="true" type="_QTLfsJA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QYCKgZA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QWM-gJA_EeSEiKM1Xq3Vkg" name="workerPool" visibility="private" isLeaf="true" type="_QFqoIJA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QYFN0ZA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QWOMoJA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" visibility="private" isLeaf="true" type="_QRig8JA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QYJfQJA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QWPawJA_EeSEiKM1Xq3Vkg" name="isShutdown" visibility="private">
                    <eAnnotations xmi:id="_QWPawZA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                      <details xmi:id="_QWPawpA_EeSEiKM1Xq3Vkg" key="volatile"/>
                    </eAnnotations>
                    <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QWPaw5A_EeSEiKM1Xq3Vkg" value="false"/>
                  </ownedAttribute>
                  <ownedAttribute xmi:id="_QWQo4JA_EeSEiKM1Xq3Vkg" name="shutdownSignal" visibility="private" isLeaf="true" type="_QRcaUJA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QYNJoJA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QWR3AJA_EeSEiKM1Xq3Vkg" name="wakenUp" visibility="protected" isLeaf="true" type="_QST9AZA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QYQM8JA_EeSEiKM1Xq3Vkg">
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QWR3AZA_EeSEiKM1Xq3Vkg" value="new AtomicBoolean()"/>
                  </ownedAttribute>
                  <ownedAttribute xmi:id="_QWTFIJA_EeSEiKM1Xq3Vkg" name="logger" visibility="private" isStatic="true" type="_QRePgZA_EeSEiKM1Xq3Vkg" association="_QYT3UJA_EeSEiKM1Xq3Vkg">
                    <defaultValue xmi:type="uml:LiteralString" xmi:id="_QWTFIZA_EeSEiKM1Xq3Vkg" value="Logger.getLogger(DefaultServer.class)"/>
                  </ownedAttribute>
                  <interfaceRealization xmi:id="_QTUpoJA_EeSEiKM1Xq3Vkg" client="_QIkyMJA_EeSEiKM1Xq3Vkg" supplier="_QJyTIJA_EeSEiKM1Xq3Vkg" contract="_QJyTIJA_EeSEiKM1Xq3Vkg"/>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QWy0YJA_EeSEiKM1Xq3Vkg" name="DefaultServer" specification="_QVLq0JA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QWy0YZA_EeSEiKM1Xq3Vkg" name="strAddress">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                    </ownedParameter>
                    <ownedParameter xmi:id="_QWy0YpA_EeSEiKM1Xq3Vkg" name="port">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                    </ownedParameter>
                    <ownedParameter xmi:id="_QWy0Y5A_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWy0ZJA_EeSEiKM1Xq3Vkg" name="workerPool" type="_QFqoIJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QWy0ZZA_EeSEiKM1Xq3Vkg" type="_QIkyMJA_EeSEiKM1Xq3Vkg" direction="return">
                      <name xsi:nil="true"/>
                    </ownedParameter>
                    <language>java</language>
                    <body>this.eventDistributionHandler = eventDistributionHandler;&#xD;
		eventDistributionHandler.submitServiceEvent(new ServiceStartingEvent());&#xD;
		selector = Selector.open();&#xD;
		sschannel = ServerSocketChannel.open();&#xD;
		sschannel.configureBlocking(false);&#xD;
		logger.debug(&quot;Listening to &quot; + strAddress + &quot; port : &quot; + port);&#xD;
		address = new InetSocketAddress(strAddress, port);&#xD;
		ServerSocket ss = sschannel.socket();&#xD;
		ss.bind(address);&#xD;
		sschannel.register(selector, SelectionKey.OP_ACCEPT);&#xD;
		this.workerPool = workerPool;&#xD;
		shutdownSignal = new CountDownLatch(1);&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QW0CgJA_EeSEiKM1Xq3Vkg" name="getWorkerPool" specification="_QI0p0JA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QW0CgZA_EeSEiKM1Xq3Vkg" type="_QFqoIJA_EeSEiKM1Xq3Vkg" direction="return">
                      <name xsi:nil="true"/>
                    </ownedParameter>
                    <language>java</language>
                    <body>return workerPool;&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QW0pkJA_EeSEiKM1Xq3Vkg" name="getMasterHandler" specification="_QI3GEJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QW1QoJA_EeSEiKM1Xq3Vkg" type="_QRig8JA_EeSEiKM1Xq3Vkg" direction="return">
                      <name xsi:nil="true"/>
                    </ownedParameter>
                    <language>java</language>
                    <body>return eventDistributionHandler;&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QW1QoZA_EeSEiKM1Xq3Vkg" name="run" specification="_QI47QJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>logger.debug(&quot;start the server.&quot;);&#xD;
		eventDistributionHandler.start();&#xD;
		workerPool.start();&#xD;
		workerPool.waitReady();&#xD;
		eventDistributionHandler.submitServiceEvent(new ServiceStartedEvent());&#xD;
		// loop&#xD;
		while (true) {&#xD;
			try {&#xD;
				wakenUp.set(false);&#xD;
				int num = 0;&#xD;
				num = selector.select();&#xD;
				// If we shutdown the loop, then beak from the loop&#xD;
				if(isShutdown){&#xD;
					logger.debug(&quot;shutdown, break loop after select.&quot;);&#xD;
					shutdownSignal.countDown();&#xD;
					doJobAfterShutdown();&#xD;
					break;&#xD;
				}&#xD;
				if (num > 0) {&#xD;
					Set selectedKeys = selector.selectedKeys();&#xD;
					Iterator it = selectedKeys.iterator();&#xD;
					while (it.hasNext()) {&#xD;
						SelectionKey key = (SelectionKey) it.next();&#xD;
						it.remove();&#xD;
						// accept &#xD;
						if (key.isAcceptable()) {&#xD;
							// Accept the new connection&#xD;
							ServerSocketChannel ssc = (ServerSocketChannel) key.channel();&#xD;
							SocketChannel sc = ssc.accept();&#xD;
							sc.configureBlocking(false);&#xD;
							// 将接收到的channel，放到工作线程池中&#xD;
							this.getWorkerPool().register(sc);&#xD;
						} &#xD;
					}&#xD;
				} &#xD;
			} catch (IOException e) {&#xD;
				if(isShutdown){&#xD;
					logger.debug(&quot;shutdown, break loop after ioexception. exception detail : &quot; &#xD;
						+ StringUtils.ExceptionStackTraceToString(e));&#xD;
					shutdownSignal.countDown();&#xD;
					doJobAfterShutdown();&#xD;
					break;&#xD;
				}&#xD;
				logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
						+ StringUtils.ExceptionStackTraceToString(e));&#xD;
				continue;&#xD;
			}&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QW13sJA_EeSEiKM1Xq3Vkg" name="doJobAfterShutdown" specification="_QI6JYJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>try {&#xD;
			sschannel.close();&#xD;
		} catch (IOException e) {&#xD;
			// TODO Auto-generated catch block&#xD;
			logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
					+ StringUtils.ExceptionStackTraceToString(e));&#xD;
		}&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QW2ewJA_EeSEiKM1Xq3Vkg" name="shutdown" specification="_QI7XgJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>logger.debug(&quot;shutdown.&quot;);&#xD;
		isShutdown = true;&#xD;
		if (selector != null) {&#xD;
         if (wakenUp.compareAndSet(false, true)) {&#xD;
             selector.wakeup();&#xD;
         }&#xD;
     }&#xD;
		eventDistributionHandler.shutdown();&#xD;
		workerPool.shutdown();&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QW3F0JA_EeSEiKM1Xq3Vkg" name="shutdownImediate" specification="_QI8loJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>logger.debug(&quot;shutdown imediately.&quot;);&#xD;
		isShutdown = true;&#xD;
		if (selector != null) {&#xD;
         if (wakenUp.compareAndSet(false, true)) {&#xD;
             selector.wakeup();&#xD;
         }&#xD;
     }&#xD;
		try {&#xD;
			shutdownSignal.await();&#xD;
		} catch (InterruptedException e) {&#xD;
			logger.error(&quot;not expected interruptedException happened. exception detail : &quot; &#xD;
					+ StringUtils.ExceptionStackTraceToString(e));&#xD;
		}&#xD;
		eventDistributionHandler.shutdownImediate();&#xD;
		workerPool.shutdownImediate();&#xD;
	</body>
                  </ownedBehavior>
                  <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_QW3s4JA_EeSEiKM1Xq3Vkg" name="waitReady" specification="_QI9zwJA_EeSEiKM1Xq3Vkg">
                    <language>java</language>
                    <body>workerPool.waitReady();&#xD;
	</body>
                  </ownedBehavior>
                  <ownedOperation xmi:id="_QI0p0JA_EeSEiKM1Xq3Vkg" name="getWorkerPool" method="_QW0CgJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QTb-YJA_EeSEiKM1Xq3Vkg" type="_QFqoIJA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QI3GEJA_EeSEiKM1Xq3Vkg" name="getMasterHandler" method="_QW0pkJA_EeSEiKM1Xq3Vkg">
                    <ownedParameter xmi:id="_QVOHEJA_EeSEiKM1Xq3Vkg" type="_QRig8JA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QI47QJA_EeSEiKM1Xq3Vkg" name="run" method="_QW1QoZA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QI6JYJA_EeSEiKM1Xq3Vkg" name="doJobAfterShutdown" visibility="private" method="_QW13sJA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QI7XgJA_EeSEiKM1Xq3Vkg" name="shutdown" method="_QW2ewJA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXGWYJA_EeSEiKM1Xq3Vkg">
                      <body>shutdown</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QI8loJA_EeSEiKM1Xq3Vkg" name="shutdownImediate" method="_QW3F0JA_EeSEiKM1Xq3Vkg">
                    <ownedComment xmi:id="_QXG9cJA_EeSEiKM1Xq3Vkg">
                      <body>shutdown</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QI9zwJA_EeSEiKM1Xq3Vkg" name="waitReady" method="_QW3s4JA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QVLq0JA_EeSEiKM1Xq3Vkg" name="DefaultServer" method="_QWy0YJA_EeSEiKM1Xq3Vkg" raisedException="_95sv4JCfEeSGr5JQJqgUjA">
                    <eAnnotations xmi:id="_QVM48JA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
                      <details xmi:id="_QVM48ZA_EeSEiKM1Xq3Vkg" key="create"/>
                    </eAnnotations>
                    <ownedParameter xmi:id="_QVLq0ZA_EeSEiKM1Xq3Vkg" name="strAddress">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                    </ownedParameter>
                    <ownedParameter xmi:id="_QVMR4JA_EeSEiKM1Xq3Vkg" name="port">
                      <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                    </ownedParameter>
                    <ownedParameter xmi:id="_QVMR4ZA_EeSEiKM1Xq3Vkg" name="eventDistributionHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QVMR4pA_EeSEiKM1Xq3Vkg" name="workerPool" type="_QFqoIJA_EeSEiKM1Xq3Vkg"/>
                    <ownedParameter xmi:id="_QVM48pA_EeSEiKM1Xq3Vkg" type="_QIkyMJA_EeSEiKM1Xq3Vkg" direction="return"/>
                  </ownedOperation>
                </packagedElement>
                <packagedElement xmi:type="uml:Interface" xmi:id="_QJyTIJA_EeSEiKM1Xq3Vkg" name="Server">
                  <ownedComment xmi:id="_QXG9cZA_EeSEiKM1Xq3Vkg">
                    <body>Server interface&#xD;
@author zhonxu&#xD;
 *</body>
                  </ownedComment>
                  <generalization xmi:id="_QVX4EJA_EeSEiKM1Xq3Vkg" general="_QUPPoZA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QJ1WcJA_EeSEiKM1Xq3Vkg" name="workerPool" type="_QFqoIJA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXWOAZA_EeSEiKM1Xq3Vkg"/>
                  <ownedAttribute xmi:id="_QJ3ysJA_EeSEiKM1Xq3Vkg" name="masterHandler" type="_QRig8JA_EeSEiKM1Xq3Vkg" isReadOnly="true" association="_QXYqQJA_EeSEiKM1Xq3Vkg"/>
                  <ownedOperation xmi:id="_QJ5A0JA_EeSEiKM1Xq3Vkg" name="waitReady"/>
                  <ownedOperation xmi:id="_QJ5n4JA_EeSEiKM1Xq3Vkg" name="shutdown">
                    <ownedComment xmi:id="_QXHkgJA_EeSEiKM1Xq3Vkg">
                      <body>shutdown</body>
                    </ownedComment>
                  </ownedOperation>
                  <ownedOperation xmi:id="_QJ6O8JA_EeSEiKM1Xq3Vkg" name="shutdownImediate">
                    <ownedComment xmi:id="_QXHkgZA_EeSEiKM1Xq3Vkg">
                      <body>shutdown imediate</body>
                    </ownedComment>
                  </ownedOperation>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXWOAZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXWOApA_EeSEiKM1Xq3Vkg _QJ1WcJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXWOApA_EeSEiKM1Xq3Vkg" name="" type="_QJyTIJA_EeSEiKM1Xq3Vkg" association="_QXWOAZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QXYqQJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QXYqQZA_EeSEiKM1Xq3Vkg _QJ3ysJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QXYqQZA_EeSEiKM1Xq3Vkg" name="" type="_QJyTIJA_EeSEiKM1Xq3Vkg" association="_QXYqQJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QX5noZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QX5nopA_EeSEiKM1Xq3Vkg _QWG34JA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QX5nopA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QX5noZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QX8q8JA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QX8q8ZA_EeSEiKM1Xq3Vkg _QWJUIJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QX8q8ZA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QX8q8JA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QX_HMZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QX_HMpA_EeSEiKM1Xq3Vkg _QWKiQJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QX_HMpA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QX_HMZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QYCKgZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QYCKgpA_EeSEiKM1Xq3Vkg _QWLwYJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QYCKgpA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QYCKgZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QYFN0ZA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QYFN0pA_EeSEiKM1Xq3Vkg _QWM-gJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QYFN0pA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QYFN0ZA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QYJfQJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QYJfQZA_EeSEiKM1Xq3Vkg _QWOMoJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QYJfQZA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QYJfQJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QYNJoJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QYNJoZA_EeSEiKM1Xq3Vkg _QWQo4JA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QYNJoZA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QYNJoJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QYQM8JA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QYQM8ZA_EeSEiKM1Xq3Vkg _QWR3AJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QYQM8ZA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QYQM8JA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
                <packagedElement xmi:type="uml:Association" xmi:id="_QYT3UJA_EeSEiKM1Xq3Vkg" name="" memberEnd="_QYT3UZA_EeSEiKM1Xq3Vkg _QWTFIJA_EeSEiKM1Xq3Vkg">
                  <ownedEnd xmi:id="_QYT3UZA_EeSEiKM1Xq3Vkg" name="" type="_QIkyMJA_EeSEiKM1Xq3Vkg" association="_QYT3UJA_EeSEiKM1Xq3Vkg"/>
                </packagedElement>
              </packagedElement>
            </packagedElement>
            <packagedElement xmi:type="uml:Package" xmi:id="_P_iyAJA_EeSEiKM1Xq3Vkg" name="common">
              <packagedElement xmi:type="uml:Class" xmi:id="_QRgrwJA_EeSEiKM1Xq3Vkg" name="StringUtils"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Package" xmi:id="_P_iyAZA_EeSEiKM1Xq3Vkg" name="distribution">
              <packagedElement xmi:type="uml:Class" xmi:id="_QRig8JA_EeSEiKM1Xq3Vkg" name="EventDistributionMaster"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Package" xmi:id="_QAAsEJA_EeSEiKM1Xq3Vkg" name="event">
              <packagedElement xmi:type="uml:Class" xmi:id="_QSVyMJA_EeSEiKM1Xq3Vkg" name="ServiceOnChannelCloseExeptionEvent"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_QSXAUZA_EeSEiKM1Xq3Vkg" name="ServiceOnChannelIOExeptionEvent"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_QSY1gZA_EeSEiKM1Xq3Vkg" name="ServiceOnMessageReceiveEvent"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_QSbRwJA_EeSEiKM1Xq3Vkg" name="ServiceOnMessageWriteEvent"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_QTQ_QJA_EeSEiKM1Xq3Vkg" name="ServiceStartedEvent"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_QTSNYZA_EeSEiKM1Xq3Vkg" name="ServiceStartingEvent"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Package" xmi:id="_QABTIJA_EeSEiKM1Xq3Vkg" name="exception">
              <packagedElement xmi:type="uml:Class" xmi:id="_QSdG8JA_EeSEiKM1Xq3Vkg" name="ServiceException"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_QSe8IZA_EeSEiKM1Xq3Vkg" name="ServiceOnChanelClosedException"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_QShYYJA_EeSEiKM1Xq3Vkg" name="ServiceOnChanelIOException"/>
            </packagedElement>
          </packagedElement>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_P_WkwJA_EeSEiKM1Xq3Vkg" name="java">
      <packagedElement xmi:type="uml:Package" xmi:id="_P_XL0JA_EeSEiKM1Xq3Vkg" name="nio">
        <packagedElement xmi:type="uml:Package" xmi:id="_P_XL0ZA_EeSEiKM1Xq3Vkg" name="channels">
          <packagedElement xmi:type="uml:Class" xmi:id="_QRVsoJA_EeSEiKM1Xq3Vkg" name="SocketChannel"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_QSBpIJA_EeSEiKM1Xq3Vkg" name="ClosedChannelException"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_QSDeUJA_EeSEiKM1Xq3Vkg" name="SelectionKey"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_QSFTgZA_EeSEiKM1Xq3Vkg" name="Selector"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_QTOjAZA_EeSEiKM1Xq3Vkg" name="ServerSocketChannel"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_QR_M4ZA_EeSEiKM1Xq3Vkg" name="ByteBuffer"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_P_hj4JA_EeSEiKM1Xq3Vkg" name="util">
        <packagedElement xmi:type="uml:Package" xmi:id="_P_hj4ZA_EeSEiKM1Xq3Vkg" name="concurrent">
          <packagedElement xmi:type="uml:Package" xmi:id="_QAAFAJA_EeSEiKM1Xq3Vkg" name="atomic">
            <packagedElement xmi:type="uml:Class" xmi:id="_QST9AZA_EeSEiKM1Xq3Vkg" name="AtomicBoolean"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Class" xmi:id="_QRcaUJA_EeSEiKM1Xq3Vkg" name="CountDownLatch"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_QSMoQJA_EeSEiKM1Xq3Vkg" name="ConcurrentLinkedQueue"/>
          <packagedElement xmi:type="uml:Interface" xmi:id="_QSN2YZA_EeSEiKM1Xq3Vkg" name="ExecutorService"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_QSQSoJA_EeSEiKM1Xq3Vkg" name="Executors"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_QSSH0JA_EeSEiKM1Xq3Vkg" name="RejectedExecutionException"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Interface" xmi:id="_QSHIsZA_EeSEiKM1Xq3Vkg" name="Iterator"/>
        <packagedElement xmi:type="uml:Interface" xmi:id="_QSJk8JA_EeSEiKM1Xq3Vkg" name="Queue"/>
        <packagedElement xmi:type="uml:Interface" xmi:id="_QSKzEZA_EeSEiKM1Xq3Vkg" name="Set"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_P_2UAJA_EeSEiKM1Xq3Vkg" name="io">
        <packagedElement xmi:type="uml:Class" xmi:id="_QRzmsJA_EeSEiKM1Xq3Vkg" name="IOException"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_QR9XsJA_EeSEiKM1Xq3Vkg" name="UnsupportedEncodingException"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_QBc2gJA_EeSEiKM1Xq3Vkg" name="net">
        <packagedElement xmi:type="uml:Class" xmi:id="_QTLfsJA_EeSEiKM1Xq3Vkg" name="InetSocketAddress"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_QTNU4JA_EeSEiKM1Xq3Vkg" name="ServerSocket"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_QUPPoJA_EeSEiKM1Xq3Vkg" name="lang">
        <packagedElement xmi:type="uml:Interface" xmi:id="_QUPPoZA_EeSEiKM1Xq3Vkg" name="Runnable"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_95sv4JCfEeSGr5JQJqgUjA" name="Exception"/>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_P_iK8JA_EeSEiKM1Xq3Vkg" name="org">
      <packagedElement xmi:type="uml:Package" xmi:id="_P_iK8ZA_EeSEiKM1Xq3Vkg" name="apache">
        <packagedElement xmi:type="uml:Package" xmi:id="_P_iK8pA_EeSEiKM1Xq3Vkg" name="log4j">
          <packagedElement xmi:type="uml:Class" xmi:id="_QRePgZA_EeSEiKM1Xq3Vkg" name="Logger"/>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <profileApplication xmi:id="_PQdecJA_EeSEiKM1Xq3Vkg">
      <eAnnotations xmi:id="_PQfToJA_EeSEiKM1Xq3Vkg" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile-Annotation_2-UMLLabProfile"/>
      </eAnnotations>
      <appliedProfile href="pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile"/>
    </profileApplication>
  </uml:Model>
  <UMLLabProfile:TargetLanguage xmi:id="_PQhI0JA_EeSEiKM1Xq3Vkg" base_Package="_PGrQUJA_EeSEiKM1Xq3Vkg">
    <languageName>java</languageName>
  </UMLLabProfile:TargetLanguage>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QGOo0JA_EeSEiKM1Xq3Vkg" base_Element="_QGMzoJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Annotations xmi:id="_QGPP4JA_EeSEiKM1Xq3Vkg" base_Element="_QGMzoJA_EeSEiKM1Xq3Vkg">
    <annotations xmi:id="_QGP28JA_EeSEiKM1Xq3Vkg" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QGRFEJA_EeSEiKM1Xq3Vkg" base_Element="_QGP28ZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Annotations xmi:id="_QGRsIJA_EeSEiKM1Xq3Vkg" base_Element="_QGP28ZA_EeSEiKM1Xq3Vkg">
    <annotations xmi:id="_QGRsIZA_EeSEiKM1Xq3Vkg" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QGThUJA_EeSEiKM1Xq3Vkg" base_Element="_QGSTMJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Annotations xmi:id="_QGUvcJA_EeSEiKM1Xq3Vkg" base_Element="_QGSTMJA_EeSEiKM1Xq3Vkg">
    <annotations xmi:id="_QGUvcZA_EeSEiKM1Xq3Vkg" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QHnI4JA_EeSEiKM1Xq3Vkg" base_Element="_QHl6wJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Annotations xmi:id="_QHoXAJA_EeSEiKM1Xq3Vkg" base_Element="_QHl6wJA_EeSEiKM1Xq3Vkg">
    <annotations xmi:id="_QHoXAZA_EeSEiKM1Xq3Vkg" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QI_B4JA_EeSEiKM1Xq3Vkg" base_Element="_QI9zwJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Annotations xmi:id="_QJAQAJA_EeSEiKM1Xq3Vkg" base_Element="_QI9zwJA_EeSEiKM1Xq3Vkg">
    <annotations xmi:id="_QJAQAZA_EeSEiKM1Xq3Vkg" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:Reference xmi:id="_QRXh0JA_EeSEiKM1Xq3Vkg" base_Element="_QRVsoJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QRePgJA_EeSEiKM1Xq3Vkg" base_Element="_QRcaUJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QRgEsJA_EeSEiKM1Xq3Vkg" base_Element="_QRePgZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QRh54JA_EeSEiKM1Xq3Vkg" base_Element="_QRgrwJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QRkWIJA_EeSEiKM1Xq3Vkg" base_Element="_QRig8JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QR1b4JA_EeSEiKM1Xq3Vkg" base_Element="_QRzmsJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QR_M4JA_EeSEiKM1Xq3Vkg" base_Element="_QR9XsJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSBCEJA_EeSEiKM1Xq3Vkg" base_Element="_QR_M4ZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSC3QJA_EeSEiKM1Xq3Vkg" base_Element="_QSBpIJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSFTgJA_EeSEiKM1Xq3Vkg" base_Element="_QSDeUJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSHIsJA_EeSEiKM1Xq3Vkg" base_Element="_QSFTgZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSI94JA_EeSEiKM1Xq3Vkg" base_Element="_QSHIsZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSKzEJA_EeSEiKM1Xq3Vkg" base_Element="_QSJk8JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSMBMJA_EeSEiKM1Xq3Vkg" base_Element="_QSKzEZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSN2YJA_EeSEiKM1Xq3Vkg" base_Element="_QSMoQJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSPrkJA_EeSEiKM1Xq3Vkg" base_Element="_QSN2YZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSRgwJA_EeSEiKM1Xq3Vkg" base_Element="_QSQSoJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QST9AJA_EeSEiKM1Xq3Vkg" base_Element="_QSSH0JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSVLIJA_EeSEiKM1Xq3Vkg" base_Element="_QST9AZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSXAUJA_EeSEiKM1Xq3Vkg" base_Element="_QSVyMJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSY1gJA_EeSEiKM1Xq3Vkg" base_Element="_QSXAUZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSaqsJA_EeSEiKM1Xq3Vkg" base_Element="_QSY1gZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QScf4JA_EeSEiKM1Xq3Vkg" base_Element="_QSbRwJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSe8IJA_EeSEiKM1Xq3Vkg" base_Element="_QSdG8JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSgxUJA_EeSEiKM1Xq3Vkg" base_Element="_QSe8IZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSimgJA_EeSEiKM1Xq3Vkg" base_Element="_QShYYJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QSlCwJA_EeSEiKM1Xq3Vkg" base_Element="_QSjNkJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QTMt0JA_EeSEiKM1Xq3Vkg" base_Element="_QTLfsJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QTOjAJA_EeSEiKM1Xq3Vkg" base_Element="_QTNU4JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QTPxIJA_EeSEiKM1Xq3Vkg" base_Element="_QTOjAZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QTSNYJA_EeSEiKM1Xq3Vkg" base_Element="_QTQ_QJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QTUCkJA_EeSEiKM1Xq3Vkg" base_Element="_QTSNYZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QT__EJA_EeSEiKM1Xq3Vkg" base_Element="_QT-w8JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QURE0JA_EeSEiKM1Xq3Vkg" base_Element="_QUPPoZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QU26sJA_EeSEiKM1Xq3Vkg" base_Element="_QU1FgJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Array xmi:id="_QVl6gJA_EeSEiKM1Xq3Vkg" dimensions="1" base_Element="_QVksYJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QVnIoJA_EeSEiKM1Xq3Vkg" base_Element="_QVksYJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QVo90JA_EeSEiKM1Xq3Vkg" base_Element="_QVoWwJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QVqzAJA_EeSEiKM1Xq3Vkg" base_Element="_QVpk4JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QVsoMJA_EeSEiKM1Xq3Vkg" base_Element="_QVraEJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Generics xmi:id="_QVzV4JA_EeSEiKM1Xq3Vkg" genericsValue="Runnable" base_Element="_QVxgsJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QVz88JA_EeSEiKM1Xq3Vkg" base_Element="_QVxgsJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QV1LEJA_EeSEiKM1Xq3Vkg" base_Element="_QV0kAJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QV2ZMJA_EeSEiKM1Xq3Vkg" base_Element="_QV1yIJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QV3nUJA_EeSEiKM1Xq3Vkg" base_Element="_QV3AQJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QV5cgJA_EeSEiKM1Xq3Vkg" base_Element="_QV4OYJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QV6qoJA_EeSEiKM1Xq3Vkg" base_Element="_QV5cgZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QV74wJA_EeSEiKM1Xq3Vkg" base_Element="_QV7RsJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QV9t8JA_EeSEiKM1Xq3Vkg" base_Element="_QV8f0JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QV-8EJA_EeSEiKM1Xq3Vkg" base_Element="_QV9t8ZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWAxQJA_EeSEiKM1Xq3Vkg" base_Element="_QWAKMJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Generics xmi:id="_QWIGAJA_EeSEiKM1Xq3Vkg" genericsValue="SelectionKey" base_Element="_QWG34JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWItEJA_EeSEiKM1Xq3Vkg" base_Element="_QWG34JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWJ7MJA_EeSEiKM1Xq3Vkg" base_Element="_QWJUIJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWLJUJA_EeSEiKM1Xq3Vkg" base_Element="_QWKiQJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWMXcJA_EeSEiKM1Xq3Vkg" base_Element="_QWLwYJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWNlkJA_EeSEiKM1Xq3Vkg" base_Element="_QWM-gJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWOzsJA_EeSEiKM1Xq3Vkg" base_Element="_QWOMoJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWQB0JA_EeSEiKM1Xq3Vkg" base_Element="_QWPawJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWRP8JA_EeSEiKM1Xq3Vkg" base_Element="_QWQo4JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWSeEJA_EeSEiKM1Xq3Vkg" base_Element="_QWR3AJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_QWTsMJA_EeSEiKM1Xq3Vkg" base_Element="_QWTFIJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXWOAJA_EeSEiKM1Xq3Vkg" base_Element="_QXTxwJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXYDMJA_EeSEiKM1Xq3Vkg" base_Element="_QXWOAZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXbGgJA_EeSEiKM1Xq3Vkg" base_Element="_QXYqQJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXdiwJA_EeSEiKM1Xq3Vkg" base_Element="_QXbGgZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXf_AJA_EeSEiKM1Xq3Vkg" base_Element="_QXdiwZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXibQJA_EeSEiKM1Xq3Vkg" base_Element="_QXgmEJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXkQcJA_EeSEiKM1Xq3Vkg" base_Element="_QXjCUJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXmssJA_EeSEiKM1Xq3Vkg" base_Element="_QXk3gJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXpI8JA_EeSEiKM1Xq3Vkg" base_Element="_QXnTwJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXsMQJA_EeSEiKM1Xq3Vkg" base_Element="_QXpwAJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXvPkJA_EeSEiKM1Xq3Vkg" base_Element="_QXszUJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QXxr0JA_EeSEiKM1Xq3Vkg" base_Element="_QXvPkZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QX0IEJA_EeSEiKM1Xq3Vkg" base_Element="_QXxr0ZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QX3LYJA_EeSEiKM1Xq3Vkg" base_Element="_QX0vIJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QX5noJA_EeSEiKM1Xq3Vkg" base_Element="_QX3LYZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QX8D4JA_EeSEiKM1Xq3Vkg" base_Element="_QX5noZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QX_HMJA_EeSEiKM1Xq3Vkg" base_Element="_QX8q8JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QYCKgJA_EeSEiKM1Xq3Vkg" base_Element="_QX_HMZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QYFN0JA_EeSEiKM1Xq3Vkg" base_Element="_QYCKgZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QYI4MJA_EeSEiKM1Xq3Vkg" base_Element="_QYFN0ZA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QYMikJA_EeSEiKM1Xq3Vkg" base_Element="_QYJfQJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QYPl4JA_EeSEiKM1Xq3Vkg" base_Element="_QYNJoJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QYTQQJA_EeSEiKM1Xq3Vkg" base_Element="_QYQM8JA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_QYWTkJA_EeSEiKM1Xq3Vkg" base_Element="_QYT3UJA_EeSEiKM1Xq3Vkg"/>
  <UMLLabProfile:Reference xmi:id="_95waQJCfEeSGr5JQJqgUjA" base_Element="_95sv4JCfEeSGr5JQJqgUjA"/>
</xmi:XMI>
